<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->

<html>
<head>
    <title>Project 3 Page</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Header -->
    <header id="header">
        <a href="index.html" class="logo">Project 3</a>
    </header>

    <!-- Nav -->
    <nav id="nav">
        <ul class="links">
            <li><a href="index_ko.html">Main</a></li>
            <li><a href="voronoi_ko.html"> Project1</a></li>
            <li><a href="metabolic_ko.html "> Project2</a></li>
            <li class ="active"><a href="account_ko.html "> Project3</a></li>
            <li><a href="employee_ko.html">Project4</a></li>

        </ul>
        <div class="language-toggle">
            <a href="account.html">EN</a>
        </div>
        <ul class="icons">
            <li><a href="http://github.com/sookki0527" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
        </ul>
    </nav>

    <!-- Main -->
    <div id="main">

        <!-- Post -->
        <section class="post">
            <header class="major">

                <p>Project 3</p>
                <h1>이상 거래 탐지 기능이 포함된 계좌 거래 대시보드</h1>
                <p>
                    이 프로젝트는 **마이크로서비스 기반의 금융 거래 대시보드**로,
                    Spring Boot를 활용한 RESTful API와,
                    Python 기반의 머신러닝 서비스를 Kafka 메시지 스트리밍으로 연동하여
                    **이상 거래 탐지 기능**을 구현했습니다.
                </p>

            </header>
            <div class="row">
                <div class="column2">
                    <img src = "./images/account/notifiacation2.png" style = "width:100%" class = "center">
                </div>
                <br>
                <div class="column2">
                    <img src = "./images/account/accountimage.png" style = "width:100%" class = "center">
                </div>
            </div>

            <p>
                은행 계좌 및 거래 내역을 관리하며,
                **머신러닝 모델 기반의 실시간 이상 거래 탐지 기능**을 제공하는 **풀스택 마이크로서비스 애플리케이션**입니다.
                Spring Boot, Kafka, Flask, Angular로 구성되어 있으며,
                **Isolation Forest** 알고리즘을 활용한 이상 탐지와
                **비동기 메시지 처리 전 과정을 통합적으로 구현**한 시스템입니다.
            </p>


            <h2>아키텍처 </h2>
            <img src = "./images/account/Diagram.png" style = "width:100%" class = "center">


            <h2>기술 스택 (Tech Stack)</h2>
            <ul>
                <li><strong>Spring Boot</strong>: REST API 및 거래 처리용 백엔드 마이크로서비스</li>
                <li><strong>Apache Kafka</strong>: 실시간 이벤트 스트리밍 및 서비스 간 메시지 통신</li>
                <li><strong>Flask (Python)</strong>: Isolation Forest 기반 이상 거래 탐지 모델을 API로 제공하는 머신러닝 마이크로서비스</li>
                <li><strong>Docker</strong>: 서비스 간 환경 일관성 유지를 위한 컨테이너화</li>
                <li><strong>MySQL</strong>: 계좌 및 거래 기록을 저장하는 관계형 데이터베이스</li>
                <li><strong>Angular</strong>: BehaviorSubject와 반응형 폼으로 구성된 프론트엔드 UI</li>
                <li><strong>WebSocket</strong>: 신규 거래 및 경고 알림을 위한 실시간 프론트엔드 업데이트</li>
            </ul>

            <h2>기능 (Features)</h2>
            <ul>
                <li>보안 RESTful API를 통한 계좌 및 거래 생성 기능</li>
                <li>Kafka 기반의 실시간 이상 거래 탐지 파이프라인</li>
                <li>Python 머신러닝 마이크로서비스와 REST API 통합</li>
                <li>Docker Compose를 이용한 전체 컨테이너 구성</li>
            </ul>

            <h2>구조 (Structure)</h2>

            <h4>계좌 서비스 (Account Service)</h4>
            <ul>
                <li>REST API를 통해 입금 및 출금 요청을 수신</li>
                <li>Kafka 프로듀서로서 <code>account-topic</code>에 거래 이벤트 전송</li>
                <li>계좌 데이터를 MySQL에 저장</li>
                <li><strong>사용 기술:</strong> Spring Boot, JPA, MySQL, Kafka Producer, REST API</li>
            </ul>

            <h4>거래 서비스 (Transaction Service)</h4>
            <ul>
                <li>계좌 간 송금 요청을 REST API로 수신</li>
                <li>Kafka 프로듀서로서 <code>transfer-topic</code>에 송금 이벤트 전송</li>
                <li>거래 기록을 MySQL에 저장</li>
                <li><strong>사용 기술:</strong> Spring Boot, JPA, MySQL, Kafka Producer, REST API</li>
            </ul>

            <h4>Kafka</h4>
            <ul>
                <li>서비스 간 비동기 메시지 브로커 역할 수행</li>
                <li>계좌, 거래, 이상 탐지 서비스에서 발생한 메시지를 처리</li>
                <li>메시지를 알림(Notification) 서비스로 전달</li>
                <li><strong>사용 기술:</strong> Apache Kafka, Kafka Topic, Spring Kafka (Producer/Consumer), kafka-python, Docker Compose</li>
            </ul>

            <h4>알림 서비스 (Notification Service)</h4>
            <ul>
                <li>Kafka에서 수신한 메시지를 실시간 알림으로 변환</li>
                <li>WebSocket을 사용하여 프론트엔드로 실시간 알림 푸시</li>
                <li><strong>사용 기술:</strong> Spring Boot, JPA, MySQL, Kafka Producer, REST API</li>
            </ul>

            <h4>이상 거래 탐지 서비스 (Fraud Detection Service)</h4>
            <ul>
                <li>Kafka에서 거래 이벤트를 소비하고, Flask ML API에 RestTemplate으로 전달</li>
                <li>Flask로부터 예측 결과를 수신한 후, 다시 Kafka에 게시</li>
                <li><strong>사용 기술:</strong> Spring Boot, JPA, MySQL, Kafka Producer, REST API</li>
            </ul>

            <h3>Flask (ML 서비스)</h3>
            <ul>
                <li>사전 학습된 Isolation Forest 모델을 불러와 거래 데이터를 분석</li>
                <li>거래 DB에서 추출한 데이터를 기반으로 모델 학습</li>
                <li>각 거래가 이상(anomaly)인지 여부를 예측 결과로 반환</li>
                <li><strong>사용 기술:</strong> Flask, Scikit-learn, Joblib, Pandas, NumPy, Docker</li>
            </ul>

            <h3>머신러닝 학습 과정 (ML Training Process)</h3>
            <p>
                강건한 이상 거래 탐지 모델을 구축하기 위해,
                초기에 <code>amount</code>, <code>from_account_id</code>, <code>to_account_id</code>, <code>date</code> 등의 원시 특성(raw features)을 사용해 학습을 시도했습니다.
                하지만 계좌 ID나 시간 정보는 거래 행태와의 연관성이 낮아, 이상 탐지에는 효과적이지 않았습니다.
            </p>

            <h4>특성 엔지니어링 (Feature Engineering)</h4>
            <p>
                탐지 정확도를 향상시키기 위해,
                <code>amount</code>와 <code>from_account_id</code> 간의 관계 등 **사용자별 통계적 거래 행태를 반영한 특성(feature)**을 직접 생성했습니다.
                아래의 Python 코드는 이러한 특성들을 계산하고 병합한 방법을 보여줍니다:
            </p>


            <pre><code>
from_stats = df.groupby('from_account_id')['amount'].agg(['mean', 'std', 'count']).rename(
    columns={'mean': 'from_mean', 'std': 'from_std', 'count': 'from_count'}
)

to_stats = df.groupby('to_account_id')['amount'].agg(['mean', 'std', 'count']).rename(
    columns={'mean': 'to_mean', 'std': 'to_std', 'count': 'to_count'}
)

df = df.merge(from_stats, on='from_account_id', how='left')
df = df.merge(to_stats, on='to_account_id', how='left')
</code></pre>

            <p>
                이러한 엔지니어링된 특성(feature)들은
                송신자와 수신자의 과거 거래 패턴을 기반으로,
                해당 거래가 **정상적인지 비정상적인지에 대한 맥락 정보를 제공**했습니다.
            </p>

            <h4>🧪 Isolation Forest 기반 모델 학습</h4>
            <p>
                레이블이 부여된 사기(fraud) 데이터가 없기 때문에,
                Scikit-learn의 <code>IsolationForest</code>를 활용한 **비지도 학습 기반 이상 탐지 방식**을 선택했습니다.
                불균형 데이터셋을 모사하기 위해 <code>contamination = 0.2</code>로 설정하여,
                전체 거래의 약 20%가 이상 거래일 수 있다고 가정했습니다.
            </p>

            <pre><code>
from sklearn.ensemble import IsolationForest

model = IsolationForest(
    n_estimators=100,
    contamination=0.2,
    max_features=1.0,
    random_state=42
)

model.fit(X)
df['anomaly'] = model.predict(X)
df['anomaly_score'] = model.decision_function(X)
</code></pre>

            <p>
                이상 거래로 예측된 트랜잭션은 <code>anomaly</code> 열에서 <code>-1</code>로 라벨링되며,
                <code>anomaly_score</code>는 각 거래의 **의심 수준(confidence)**을 나타내어
                **의심 거래를 우선순위로 정렬**하는 데 사용됩니다.
            </p>

            <p>
                모델은 최종적으로 <code>joblib</code>을 사용하여 **직렬화(serialization)** 되었으며,
                Flask를 통해 **REST API로 배포**되어,
                Spring Boot 기반의 전체 마이크로서비스 아키텍처 내에서 **실시간 이상 거래 탐지 기능**을 수행합니다.
            </p>



            <img src = "./images/model_result.png" style = "width:100%" class = "center">
            <h3>More detailed code </h3>
            <ul class="icons alt">

                <li><a href="http://github.com/sookki0527" class="icon brands alt fa-github"><span class="label">GitHub</span></a>
            </ul>

        </section>

    </div>

    <!-- Footer -->
    <footer id="footer">
        <section>
            <form method="post" action="#">
                <div class="fields">
                    <div class="field">
                        <label for="name">Name</label>
                        <input type="text" name="name" id="name" />
                    </div>
                    <div class="field">
                        <label for="email">Email</label>
                        <input type="text" name="email" id="email" />
                    </div>
                    <div class="field">
                        <label for="message">Message</label>
                        <textarea name="message" id="message" rows="3"></textarea>
                    </div>
                </div>
                <ul class="actions">
                    <li><input type="submit" value="Send Message" /></li>
                </ul>
            </form>
        </section>
        <section class="split contact">
            <section class="alt">
                <h3>Address</h3>
                <p>9300 Corporate Blvd Rockville 1341<br />
                    MD 20850 </p>
            </section>
            <section>
                <h3>Phone</h3>
                <p><a href="#">303-875-8115</a></p>
            </section>
            <section>
                <h3>Email</h3>
                <p><a href="#">sookki1205@gmail.com</a></p>
            </section>
            <section>
                <h3>Social</h3>
                <ul class="icons alt">

                    <li><a href="http://github.com/sookki0527" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
                </ul>
            </section>
        </section>
    </footer>

    <!-- Copyright -->
    <div id="copyright">
        <ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
    </div>

</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

</body>
</html>
</div>
</body>
</html>